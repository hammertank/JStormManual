# JStorm安装手册 #
## 安装 ##
安装步骤参照[官方文档](https://github.com/alibaba/jstorm/wiki/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85)
## 配置 ##
### 最简配置 ###
在安装包内storm.yaml基础上修改：

- storm.zookeeper.servers: 表示zookeeper 的地址
- nimbus.host: 表示nimbus的地址

### 可选配置 ###
- storm.zookeeper.root: 表示JStorm在zookeeper中的根目录，当多个JStorm共享一个zookeeper时，需要设置该选项，默认即为“/jstorm”
- storm.local.dir: 表示JStorm临时数据存放目录，需要保证JStorm程序对该目录有写权限
- worker.memory.size: woker的默认内存（JVM heap）大小，单位：字节
- supervisor.enable.cgroup: 使用[cgroup](http://tech.meituan.com/cgroups.html)实现资源隔离，限制JStorm个进程的资源使用量

### supervisor.slots.ports的两种配置方式 ###
1. 手动指定

 		supervisor.slots.ports:
			- 6800
			- 6801
			- 6802
			- 6803
 
2. 自动计算

	下面四个配置项都是可选配置：

		# if supervisor.slots.ports is null,
		# the port list will be generated by cpu cores and system memory size
		# for example,
		# there are cpu_num = system_physical_cpu_num/supervisor.slots.port.cpu.weight
		# there are mem_num = system_physical_memory_size/(worker.memory.size * supervisor.slots.port.mem.weight)
		# The final port number is min(cpu_num, mem_num)
		supervisor.slots.ports.base: 6800
		supervisor.slots.port.cpu.weight: 1.2
		supervisor.slots.port.mem.weight: 0.7
		supervisor.slots.ports: null	

### 启用ZeroMQ ###
要启用ZeroMQ作为JStorm底层的消息传输插件，除了安装ZeroMQ和JZMQ以外，还需要配置：

- storm.messaging.transport: 默认值是"com.alibaba.jstorm.message.netty.NettyContext"，要改为"com.alibaba.jstorm.message.zeroMq.MQContext"
- java.library.path: Zeromq 和java zeromq library的安装目录，默认"/usr/local/lib:/opt/local/lib:/usr/lib"


## 其他 ##
可以通过设置JSTORM\_CONF\_DIR 自定义 JStrom 配置文件目录的路径